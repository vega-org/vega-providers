"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of __getOwnPropNames(t))__hasOwnProp.call(e,a)||a===r||__defProp(e,a,{get:()=>t[a],enumerable:!(n=__getOwnPropDesc(t,a))||n.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,r)=>new Promise((n,a)=>{var o=e=>{try{s(r.next(e))}catch(e){a(e)}},l=e=>{try{s(r.throw(e))}catch(e){a(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,l);s((r=r.apply(e,t)).next())}),stream_exports={};__export(stream_exports,{getRiveStream:()=>getRiveStream,getStream:()=>getStream,getWebstreamerStream:()=>getWebstreamerStream});var getStream=__name(e=>__async(null,[e],function*({link:e,type:t,providerContext:r}){var n,a,o,l,s,i,c,m;try{const u=[],d=(()=>{try{return JSON.parse(e)}catch(t){return{tmdbId:e}}})(),p=null!=(o=null!=(a=null!=(n=d.tmdbId)?n:d.id)?a:d.tmdId)?o:"",g=null!=(l=d.imdbId)?l:"",_=null!=(s=d.season)?s:"",v=null!=(i=d.episode)?i:"",y=null!=(m=null!=(c=d.type)?c:t)?m:"movie";return yield getWebstreamerStream(String(g),v,_,y,u,r),yield getRiveStream(String(p),v,_,y,u,r),u}catch(e){return[]}}),"getStream");function getWebstreamerStream(e,t,r,n,a,o){return __async(this,null,function*(){var l;if(!e||"undefined"===e)return;const s=`https://webstreamr.hayd.uk/{"multi":"on","al":"on","de":"on","es":"on","fr":"on","hi":"on","it":"on","mx":"on","mediaFlowProxyUrl":"","mediaFlowProxyPassword":""}/stream/${n}/${e}${"series"===n?`:${r}:${t}`:""}.json`;try{null==(l=(yield o.axios.get(encodeURI(s),{timeout:3e4,headers:o.commonHeaders})).data)||l.streams.forEach(e=>{const t=null==e?void 0:e.url,r=(null==e?void 0:e.name)||"WebStreamer",o=null==r?void 0:r.match(/(\d{3,4})p/),l=o?o[1]:void 0;a.push({server:r,link:t,type:n,quality:l})})}catch(e){throw e}})}function getRiveStream(e,t,r,n,a,o){return __async(this,null,function*(){if(!e||"undefined"===e)return;const l=generateSecretKey(e),s=yield o.getBaseUrl("rive"),i=process.env.CORS_PRXY?process.env.CORS_PRXY+"?url=":"",c="series"===n?`/api/backendfetch?requestID=tvVideoProvider&id=${e}&season=${r}&episode=${t}&secretKey=${l}&service=`:`/api/backendfetch?requestID=movieVideoProvider&id=${e}&secretKey=${l}&service=`,m=i?i+encodeURIComponent(s+c):s+c;yield Promise.all(["flowcast","asiacloud","humpy","primevids","shadow","hindicast","animez","aqua","yggdrasil","putafilme","ophim"].map(e=>__async(null,null,function*(){var t,r;try{null==(r=null==(t=(yield o.axios.get(m+e,{timeout:8e3})).data)?void 0:t.data)||r.sources.forEach(e=>{a.push({server:(null==e?void 0:e.source)+"-"+(null==e?void 0:e.quality),link:null==e?void 0:e.url,type:"hls"===(null==e?void 0:e.format)?"m3u8":"mp4",quality:null==e?void 0:e.quality,headers:{referer:s}})})}catch(e){}})))})}function generateSecretKey(e){const t=["4Z7lUo","gwIVSMD","PLmz2elE2v","Z4OFV0","SZ6RZq6Zc","zhJEFYxrz8","FOm7b0","axHS3q4KDq","o9zuXQ","4Aebt","wgjjWwKKx","rY4VIxqSN","kfjbnSo","2DyrFA1M","YUixDM9B","JQvgEj0","mcuFx6JIek","eoTKe26gL","qaI9EVO1rB","0xl33btZL","1fszuAU","a7jnHzst6P","wQuJkX","cBNhTJlEOf","KNcFWhDvgT","XipDGjST","PCZJlbHoyt","2AYnMZkqd","HIpJh","KH0C3iztrG","W81hjts92","rJhAT","NON7LKoMQ","NMdY3nsKzI","t4En5v","Qq5cOQ9H","Y9nwrp","VX5FYVfsf","cE5SJG","x1vj1","HegbLe","zJ3nmt4OA","gt7rxW57dq","clIE9b","jyJ9g","B5jXjMCSx","cOzZBZTV","FTXGy","Dfh1q1","ny9jqZ2POI","X2NnMn","MBtoyD","qz4Ilys7wB","68lbOMye","3YUJnmxp","1fv5Imona","PlfvvXD7mA","ZarKfHCaPR","owORnX","dQP1YU","dVdkx","qgiK0E","cx9wQ","5F9bGa","7UjkKrp","Yvhrj","wYXez5Dg3","pG4GMU","MwMAu","rFRD5wlM"];if(void 0===e)return"rive";try{let r,n;const a=String(e);if(isNaN(Number(e))){const e=a.split("").reduce((e,t)=>e+t.charCodeAt(0),0);r=t[e%t.length]||btoa(a),n=Math.floor(e%a.length/2)}else{const o=Number(e);r=t[o%t.length]||btoa(a),n=Math.floor(o%a.length/2)}const o=a.slice(0,n)+r+a.slice(n),l=__name(e=>{e=String(e);let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r),a=((t=n+(t<<6)+(t<<16)-t>>>0)<<r%5|t>>>32-r%5)>>>0;t=(t^a^(n<<r%7|n>>>8-r%7)>>>0)>>>0,t=t+(t>>>11^t<<3)>>>0}return t^=t>>>15,t=49842*(65535&t)+((49842*(t>>>16)&65535)<<16)>>>0,t^=t>>>13,t=40503*(65535&t)+((40503*(t>>>16)&65535)<<16)>>>0,t^=t>>>16,t.toString(16).padStart(8,"0")},"innerHash"),s=__name(e=>{const t=String(e);let r=(3735928559^t.length)>>>0;for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);n^=255&(131*e+89^n<<e%5),r=(r<<7|r>>>25)>>>0^n,r=(60205*(65535&r)>>>0)+(60205*(r>>>16)<<16>>>0)>>>0,r^=r>>>11}return r^=r>>>15,r=49842*(65535&r)+(49842*(r>>>16)<<16)>>>0>>>0,r^=r>>>13,r=40503*(65535&r)+(40503*(r>>>16)<<16)>>>0>>>0,r^=r>>>16,r=10196*(65535&r)+(10196*(r>>>16)<<16)>>>0>>>0,r^=r>>>15,r.toString(16).padStart(8,"0")},"outerHash")(l(o));return btoa(s)}catch(e){return"topSecret"}}__name(getWebstreamerStream,"getWebstreamerStream"),__name(getRiveStream,"getRiveStream"),__name(generateSecretKey,"generateSecretKey"),exports.getRiveStream=getRiveStream,exports.getStream=getStream,exports.getWebstreamerStream=getWebstreamerStream;