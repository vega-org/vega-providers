"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of __getOwnPropNames(t))__hasOwnProp.call(e,a)||a===r||__defProp(e,a,{get:()=>t[a],enumerable:!(o=__getOwnPropDesc(t,a))||o.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,r)=>new Promise((o,a)=>{var s=e=>{try{i(r.next(e))}catch(e){a(e)}},n=e=>{try{i(r.throw(e))}catch(e){a(e)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,n);i((r=r.apply(e,t)).next())}),posts_exports={};__export(posts_exports,{getPosts:()=>getPosts,getSearchPosts:()=>getSearchPosts});var defaultHeaders={Referer:"https://www.google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9",Pragma:"no-cache","Cache-Control":"no-cache"};function getPosts(e){return __async(this,arguments,function*({filter:e,page:t=1,signal:r,providerContext:o}){return fetchPosts({filter:e,page:t,query:"",signal:r,providerContext:o})})}function getSearchPosts(e){return __async(this,arguments,function*({searchQuery:e,page:t=1,signal:r,providerContext:o}){return fetchPosts({filter:"",page:t,query:e,signal:r,providerContext:o})})}function fetchPosts(e){return __async(this,arguments,function*({filter:e,query:t,page:r=1,signal:o,providerContext:a}){try{const s=yield a.getBaseUrl("joya9tv");let n;if(t&&t.trim()&&"what are you looking for?"!==t.trim().toLowerCase()){const e=new URLSearchParams;e.append("s",t.trim()),r>1&&e.append("paged",r.toString()),n=`${s}/?${e.toString()}`}else n=e?e.startsWith("/")?`${s}${e.replace(/\/$/,"")}${r>1?`/page/${r}`:""}`:`${s}/${e}${r>1?`/page/${r}`:""}`:`${s}${r>1?`/page/${r}`:""}`;const{cheerio:i}=a,c=yield fetch(n,{headers:defaultHeaders,signal:o}),l=yield c.text(),p=i.load(l||""),_=__name(e=>(null==e?void 0:e.startsWith("http"))?e:new URL(e,s).href,"resolveUrl"),g=new Set,f=[];return p("article.item.movies").each((e,t)=>{const r=p(t);let o=r.find("div.data h3 a").attr("href")||"";if(!o)return;if(o=_(o),g.has(o))return;let a=r.find("div.data h3 a").text().trim();if(!a)return;let s=r.find("div.poster img").attr("src")||"";const n=s?_(s):"";g.add(o),f.push({title:a,link:o,image:n})}),p(".result-item article").each((e,t)=>{const r=p(t);let o=r.find("a").attr("href")||"";if(!o)return;if(o=_(o),g.has(o))return;let a=r.find("a").attr("title")||r.find("img").attr("alt")||"";if(a=a.trim(),!a)return;let s=r.find("img").attr("src")||"";const n=s?_(s):"";g.add(o),f.push({title:a,link:o,image:n})}),f.slice(0,100)}catch(e){return[]}})}__name(getPosts,"getPosts"),__name(getSearchPosts,"getSearchPosts"),__name(fetchPosts,"fetchPosts"),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;