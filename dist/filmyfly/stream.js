"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of __getOwnPropNames(t))__hasOwnProp.call(e,n)||n===r||__defProp(e,n,{get:()=>t[n],enumerable:!(o=__getOwnPropDesc(t,n))||o.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,r)=>new Promise((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},l=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,l);s((r=r.apply(e,t)).next())}),stream_exports={};function gdflixExtractor(e,t,r,o,n){return __async(this,null,function*(){var a,l,s,i,d,c,p;try{const u=[],_=(yield r(`${e}`,{headers:n,signal:t})).data;let y=o.load(_);if(null==(a=y("body").attr("onload"))?void 0:a.includes("location.replace")){const e=null==(i=null==(s=null==(l=y("body").attr("onload"))?void 0:l.split("location.replace('"))?void 0:s[1].split("'"))?void 0:i[0];if(e){const a=yield r.get(e,{headers:n,signal:t});y=o.load(a.data)}}try{const t=e.split("/").slice(0,3).join("/"),a=y(".btn-secondary").attr("href")||"";if(a.includes("indexbot")){const e=yield r.get(a,{headers:n}),t=e.data.match(/formData\.append\('token', '([a-f0-9]+)'\)/)[1],o=new FormData;o.append("token",t);const l=e.data.match(/fetch\('\/download\?id=([a-zA-Z0-9\/+]+)'/)[1],s=a.split("/download")[0],i=yield fetch(s+"/download?id="+l,{method:"POST",body:o,headers:{Referer:a,Cookie:"PHPSESSID=7e9658ce7c805dab5bbcea9046f7f308"}}),d=yield i.json();u.push({server:"ResumeBot",link:d.url,type:"mkv"})}else{const e=t+a,l=(yield r.get(e,{headers:n})).data,s=o.load(l)(".btn-success").attr("href");s&&u.push({server:"ResumeCloud",link:s,type:"mkv"})}}catch(e){}try{const e=y(".btn-danger").attr("href")||"";if(e.includes("?url=")){const t=e.split("=")[1],r=new FormData;r.append("keys",t);const o=e.split("/").slice(0,3).join("/")+"/api",n=yield fetch(o,{method:"POST",body:r,headers:{"x-token":o}}),a=yield n.json();if(!1===a.error){const e=a.url;u.push({server:"Gdrive-Instant",link:e,type:"mkv"})}}else{const o=(null==(p=null==(c=null==(d=(yield r.head(e,{headers:n,signal:t})).request)?void 0:d.responseURL)?void 0:c.split("?url="))?void 0:p[1])||e;u.push({server:"G-Drive",link:o,type:"mkv"})}}catch(e){}return u}catch(e){return[]}})}__export(stream_exports,{getStream:()=>getStream}),__name(gdflixExtractor,"gdflixExtractor");var getStream=__name(function(e){return __async(this,arguments,function*({link:e,signal:t,providerContext:r}){const{axios:o,cheerio:n,commonHeaders:a}=r;try{const r=(yield o.get(e,{signal:t})).data,l=n.load(r),s=[],i=l(".button2,.button1,.button3,.button4,.button").toArray().map(e=>__async(null,null,function*(){const r=l(e).text();let i=l(e).attr("href");if(r.includes("GDFLIX")&&i){const e=yield gdflixExtractor(i,t,o,n,a);s.push(...e)}const d=s.find(e=>e.link===i);!r||!i||r.includes("Watch")||r.includes("Login")||r.includes("GoFile")||d||s.push({server:r,link:i,type:"mkv"})}));return yield Promise.all(i),s}catch(e){return[]}})},"getStream");exports.getStream=getStream;