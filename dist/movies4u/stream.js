"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var o in t)__defProp(e,o,{get:t[o],enumerable:!0})},__copyProps=(e,t,o,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of __getOwnPropNames(t))__hasOwnProp.call(e,n)||n===o||__defProp(e,n,{get:()=>t[n],enumerable:!(l=__getOwnPropDesc(t,n))||l.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,o)=>new Promise((l,n)=>{var a=e=>{try{i(o.next(e))}catch(e){n(e)}},r=e=>{try{i(o.throw(e))}catch(e){n(e)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,r);i((o=o.apply(e,t)).next())}),stream_exports={};__export(stream_exports,{getStream:()=>getStream});var hubcloudDecode=__name(function(e){return void 0===e?"":atob(e.toString())},"hubcloudDecode");function hubcloudExtractor(e,t,o,l,n){return __async(this,null,function*(){var a,r,i,s,c,d;try{n.Cookie="ext_name=ojplmecpdpgccookcobabopnaifgidhf; xla=s4t; cf_clearance=woQrFGXtLfmEMBEiGUsVHrUBMT8s3cmguIzmMjmvpkg-1770053679-1.2.1.1-xBrQdciOJsweUF6F2T_OtH6jmyanN_TduQ0yslc_XqjU6RcHSxI7.YOKv6ry7oYo64868HYoULnVyww536H2eVI3R2e4wKzsky6abjPdfQPxqpUaXjxfJ02o6jl3_Vkwr4uiaU7Wy596Vdst3y78HXvVmKdIohhtPvp.vZ9_L7wvWdce0GRixjh_6JiqWmWMws46hwEt3hboaS1e1e4EoWCvj5b0M_jVwvSxBOAW5emFzvT3QrnRh4nyYmKDERnY";const u=e.split("/").slice(0,3).join("/"),p=[],h=(yield o(`${e}`,{headers:n,signal:t})).data,v=l.load(h),m=h.match(/var\s+url\s*=\s*'([^']+)';/)||[];let _=hubcloudDecode(null==(r=null==(a=m[1])?void 0:a.split("r="))?void 0:r[1])||m[1]||v(".fa-file-download.fa-lg").parent().attr("href")||e;(null==_?void 0:_.startsWith("/"))&&(_=`${u}${_}`);const f=yield fetch(_,{headers:n,signal:t,redirect:"follow"}),g=l.load(yield f.text()),y=g(".btn-success.btn-lg.h6,.btn-danger,.btn-secondary");for(const e of y){let o=g(e).attr("href")||"";switch(!0){case null==o?void 0:o.includes("pixeld"):if(!(null==o?void 0:o.includes("api"))){const e=o.split("/").pop(),t=o.split("/").slice(0,-2).join("/");o=`${t}/api/file/${e}?download`}p.push({server:"Pixeldrain",link:o,type:"mkv"});break;case(null==o?void 0:o.includes(".dev"))&&!(null==o?void 0:o.includes("/?id=")):p.push({server:"Cf Worker",link:o,type:"mkv"});break;case(null==o?void 0:o.includes("hubcloud"))||(null==o?void 0:o.includes("/?id=")):try{const e=yield fetch(o,{method:"HEAD",headers:n,signal:t,redirect:"manual"});let l=o;if(l=e.status>=300&&e.status<400?e.headers.get("location")||o:e.url&&e.url!==o?e.url:e.headers.get("location")||o,l.includes("googleusercontent"))l=l.split("?link=")[1];else{const e=yield fetch(l,{method:"HEAD",headers:n,signal:t,redirect:"manual"});l=e.status>=300&&e.status<400?(null==(i=e.headers.get("location"))?void 0:i.split("?link=")[1])||l:e.url&&e.url!==l?e.url.split("?link=")[1]||e.url:(null==(s=e.headers.get("location"))?void 0:s.split("?link=")[1])||l}p.push({server:"hubcloud",link:l,type:"mkv"})}catch(e){}break;case null==o?void 0:o.includes("cloudflarestorage"):p.push({server:"CfStorage",link:o,type:"mkv"});break;case(null==o?void 0:o.includes("fastdl"))||(null==o?void 0:o.includes("fsl.")):p.push({server:"FastDl",link:o,type:"mkv"});break;case o.includes("hubcdn")&&!o.includes("/?id="):p.push({server:"HubCdn",link:o,type:"mkv"});break;default:if((null==o?void 0:o.includes(".mkv"))||(null==o?void 0:o.includes("?token="))){const e=(null==(d=null==(c=o.match(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i))?void 0:c[1])?void 0:d.replace(/\./g," "))||"Unknown";p.push({server:e,link:o,type:"mkv"})}}}return p}catch(e){return[]}})}__name(hubcloudExtractor,"hubcloudExtractor");var headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9",DNT:"1","sec-ch-ua":'"Not_A Brand";v="8", "Chromium";v="120", "Microsoft Edge";v="120"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"Sec-Fetch-Dest":"document","Sec-Fetch-Mode":"navigate","Sec-Fetch-Site":"none","Sec-Fetch-User":"?1",Cookie:"xla=s4t; _ga=GA1.1.1081149560.1756378968; _ga_BLZGKYN5PF=GS2.1.s1756378968$o1$g1$t1756378984$j44$l0$h0","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0"};function getStream(e){return __async(this,arguments,function*({link:e,type:t,signal:o,providerContext:l}){var n,a,r,i;const{axios:s,cheerio:c,commonHeaders:d}=l;try{const l=[];if("movie"===t){const t=(yield s(`${e}`,{headers:headers})).data;e=(t.match(/<a\s+href="([^"]*cloud\.[^"]*)"/i)||[])[1];try{const e=c.load(t)('.btn.btn-sm.btn-outline[style="background:linear-gradient(135deg,rgb(252,185,0) 0%,rgb(0,0,0)); color: #fdf8f2;"]').parent().attr("href"),o=null==e?void 0:e.split("/").pop(),d=null==e?void 0:e.split("/").slice(0,-2).join("/"),u=yield s.post(d+"/api/file/downlaod/",{id:o,method:"indexDownlaod",captchaValue:null},{headers:{"Content-Type":"application/json",Referer:d}});if(null==(n=u.data)?void 0:n.status){const e=null==(a=u.data)?void 0:a.data,t=yield s.post(d+"/api/file/downlaod2/",{id:e,method:"indexDownlaod",captchaValue:null},{headers:{"Content-Type":"application/json",Referer:d}});l.push({server:"filepress",link:null==(i=null==(r=t.data)?void 0:r.data)?void 0:i[0],type:"mkv"})}}catch(e){}}return yield hubcloudExtractor(e,o,s,c,d)}catch(e){return e.message.includes("Aborted"),[]}})}__name(getStream,"getStream"),exports.getStream=getStream;