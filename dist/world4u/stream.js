"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var a in t)__defProp(e,a,{get:t[a],enumerable:!0})},__copyProps=(e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of __getOwnPropNames(t))__hasOwnProp.call(e,r)||r===a||__defProp(e,r,{get:()=>t[r],enumerable:!(o=__getOwnPropDesc(t,r))||o.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,a)=>new Promise((o,r)=>{var n=e=>{try{i(a.next(e))}catch(e){r(e)}},c=e=>{try{i(a.throw(e))}catch(e){r(e)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,c);i((a=a.apply(e,t)).next())}),stream_exports={};__export(stream_exports,{getStream:()=>getStream});var getStream=__name(function(e){return __async(this,arguments,function*({link:e,type:t,providerContext:a}){var o;const{axios:r,cheerio:n}=a,c={"sec-ch-ua":'"Not_A Brand";v="8", "Chromium";v="120", "Microsoft Edge";v="120"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"Sec-Fetch-Site":"none","Sec-Fetch-User":"?1","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36 Edg/120.0.0.0",Cookie:"61cn=1; 61wk=1; __cf_bm=wtv9Eoa2wrUDgevtAnJ6wUOZrxtVYBcddhUDtT0Wj_M-1757137848-1.0.1.1-8Tr7rV19zNgUcRYe_5567LKb2IZrKyxwrc1VWgTmMDd06Givhil3U2kMtUYTYkTnuD3sHUgfh8CO9Y5LrEcZACBbrPE.3Sq5F_JLXaK7Hrw; conv_tracking_data-2=%7B%22mf_source%22%3A%22regular_download-59%22%2C%22mf_content%22%3A%22Free%22%2C%22mf_medium%22%3A%22unknown%5C%2FDefault%20Browser%22%2C%22mf_campaign%22%3A%22616qpccbrq0y4oe%22%2C%22mf_term%22%3A%22d11b8f533377139aa38d757e5057630e%22%7D; ukey=pu2dyp35fyongstav3km969l8d6u2z82"};try{if("movie"===t){const t=(yield r.get(e,{headers:c})).data;e=n.load(t)('strong:contains("INSTANT")').parent().attr("href")||e}if(e.includes("fastilinks")){const t=(yield r.get(e,{headers:c})).data,a=n.load(t)('input[name="_csrf_token_645a83a41868941e4692aa31e7235f2"]').attr("value"),o=new FormData;o.append("_csrf_token_645a83a41868941e4692aa31e7235f2",a||"");const i=yield fetch(e,{method:"POST",headers:c,body:o}),d=yield i.text(),s=n.load(d);e=s('a:contains("mediafire")').attr("href")||s('a:contains("photolinx")').attr("href")||e}if(e.includes("photolinx")){const t=e.split("/").slice(0,3).join("/"),a=yield fetch("https://photolinx.space/download/SzbPKzt6YMO",{headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-language":"en-US,en;q=0.9,en-IN;q=0.8","cache-control":"no-cache",pragma:"no-cache",priority:"u=0, i","sec-ch-ua":'"Not;A=Brand";v="99", "Microsoft Edge";v="139", "Chromium";v="139"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1","upgrade-insecure-requests":"1",cookie:"PHPSESSID=f2211def7938d7228daaa37ffeabcfe0; ext_name=ojplmecpdpgccookcobabopnaifgidhf"},body:null,method:"GET"}),o=yield a.text(),r=n.load(o),c={type:"DOWNLOAD_GENERATE",payload:{access_token:r("#generate_url").attr("data-token"),uid:r("#generate_url").attr("data-uid")}},i=yield fetch(`${t}/action`,{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9,en-IN;q=0.8","cache-control":"no-cache","content-type":"application/json; charset=UTF-8",pragma:"no-cache",priority:"u=1, i","sec-ch-ua":'"Not;A=Brand";v="99", "Microsoft Edge";v="139", "Chromium";v="139"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-requested-with":"xmlhttprequest",cookie:"PHPSESSID=f2211def7938d7228daaa37ffeabcfe0; ext_name=ojplmecpdpgccookcobabopnaifgidhf",Referer:e},body:JSON.stringify(c),method:"POST"}),d=yield i.json(),s=null==d?void 0:d.download_url;if(s)return[{server:"Photolinx",link:s,type:"mkv"}]}const a=yield fetch(e,{headers:c}),i=yield a.text(),d=[];let s={download:""};try{const t=(null==(o=i.match(/formData\.append\('key',\s*'(\d+)'\);/))?void 0:o[1])||"",a=new FormData;a.append("key",t);const r=yield fetch(e,{method:"POST",headers:c,body:a});s=yield r.json()}catch(e){}let l=n.load(i);const p=l('h1:contains("Download")').find("a").attr("href")||l(".input.popsok").attr("href")||e;if(p){const t=(yield fetch(p,{headers:{Referer:e}})).headers.get("content-type");if(t&&t.includes("video"))return d.push({server:"Mediafire",link:p,type:"mkv"}),d;{const t=yield fetch(p,{headers:{Referer:e}}),a=yield t.text(),o=n.load(a)(".input.popsok").attr("data-scrambled-url"),r=o?atob(o):null;let c=(null==r?void 0:r.startsWith("https://"))?r:null;return c&&d.push({server:"Mediafire",link:c,type:"mkv"}),d}}const f=(yield fetch(s.download)).headers.get("content-type");if(f&&f.includes("video"))return d.push({server:"Mediafire",link:s.download,type:"mkv"}),d;{const t=yield fetch(s.download,{headers:{Referer:e}}),a=yield t.text(),o=n.load(a)("#continue-btn").attr("href"),r=yield fetch("https://www.mediafire.com"+o),c=n.load(yield r.text())(".input.popsok").attr("href");c&&d.push({server:"Mediafire",link:c,type:"mkv"})}return d}catch(e){return[]}})},"getStream");exports.getStream=getStream;