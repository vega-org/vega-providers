"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of __getOwnPropNames(t))__hasOwnProp.call(e,o)||o===r||__defProp(e,o,{get:()=>t[o],enumerable:!(n=__getOwnPropDesc(t,o))||n.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,r)=>new Promise((n,o)=>{var l=e=>{try{a(r.next(e))}catch(e){o(e)}},i=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,i);a((r=r.apply(e,t)).next())}),stream_exports={};__export(stream_exports,{decodeString:()=>decodeString,getRedirectLinks:()=>getRedirectLinks,getStream:()=>getStream});var hubcloudDecode=__name(function(e){return void 0===e?"":atob(e.toString())},"hubcloudDecode");function hubcloudExtractor(e,t,r,n,o){return __async(this,null,function*(){var l,i,a,d,s,c;try{o.Cookie="ext_name=ojplmecpdpgccookcobabopnaifgidhf; xla=s4t; cf_clearance=woQrFGXtLfmEMBEiGUsVHrUBMT8s3cmguIzmMjmvpkg-1770053679-1.2.1.1-xBrQdciOJsweUF6F2T_OtH6jmyanN_TduQ0yslc_XqjU6RcHSxI7.YOKv6ry7oYo64868HYoULnVyww536H2eVI3R2e4wKzsky6abjPdfQPxqpUaXjxfJ02o6jl3_Vkwr4uiaU7Wy596Vdst3y78HXvVmKdIohhtPvp.vZ9_L7wvWdce0GRixjh_6JiqWmWMws46hwEt3hboaS1e1e4EoWCvj5b0M_jVwvSxBOAW5emFzvT3QrnRh4nyYmKDERnY";const u=e.split("/").slice(0,3).join("/"),h=[],p=(yield r(`${e}`,{headers:o,signal:t})).data,_=n.load(p),v=p.match(/var\s+url\s*=\s*'([^']+)';/)||[];let g=hubcloudDecode(null==(i=null==(l=v[1])?void 0:l.split("r="))?void 0:i[1])||v[1]||_(".fa-file-download.fa-lg").parent().attr("href")||e;(null==g?void 0:g.startsWith("/"))&&(g=`${u}${g}`);const m=yield fetch(g,{headers:o,signal:t,redirect:"follow"}),f=n.load(yield m.text()),b=f(".btn-success.btn-lg.h6,.btn-danger,.btn-secondary");for(const e of b){let r=f(e).attr("href")||"";switch(!0){case null==r?void 0:r.includes("pixeld"):if(!(null==r?void 0:r.includes("api"))){const e=r.split("/").pop(),t=r.split("/").slice(0,-2).join("/");r=`${t}/api/file/${e}?download`}h.push({server:"Pixeldrain",link:r,type:"mkv"});break;case(null==r?void 0:r.includes(".dev"))&&!(null==r?void 0:r.includes("/?id=")):h.push({server:"Cf Worker",link:r,type:"mkv"});break;case(null==r?void 0:r.includes("hubcloud"))||(null==r?void 0:r.includes("/?id=")):try{const e=yield fetch(r,{method:"HEAD",headers:o,signal:t,redirect:"manual"});let n=r;if(n=e.status>=300&&e.status<400?e.headers.get("location")||r:e.url&&e.url!==r?e.url:e.headers.get("location")||r,n.includes("googleusercontent"))n=n.split("?link=")[1];else{const e=yield fetch(n,{method:"HEAD",headers:o,signal:t,redirect:"manual"});n=e.status>=300&&e.status<400?(null==(a=e.headers.get("location"))?void 0:a.split("?link=")[1])||n:e.url&&e.url!==n?e.url.split("?link=")[1]||e.url:(null==(d=e.headers.get("location"))?void 0:d.split("?link=")[1])||n}h.push({server:"hubcloud",link:n,type:"mkv"})}catch(e){}break;case null==r?void 0:r.includes("cloudflarestorage"):h.push({server:"CfStorage",link:r,type:"mkv"});break;case(null==r?void 0:r.includes("fastdl"))||(null==r?void 0:r.includes("fsl.")):h.push({server:"FastDl",link:r,type:"mkv"});break;case r.includes("hubcdn")&&!r.includes("/?id="):h.push({server:"HubCdn",link:r,type:"mkv"});break;default:if((null==r?void 0:r.includes(".mkv"))||(null==r?void 0:r.includes("?token="))){const e=(null==(c=null==(s=r.match(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i))?void 0:s[1])?void 0:c.replace(/\./g," "))||"Unknown";h.push({server:e,link:r,type:"mkv"})}}}return h}catch(e){return[]}})}function getStream(e){return __async(this,arguments,function*({link:e,signal:t,providerContext:r}){var n,o,l,i;const{axios:a,cheerio:d,commonHeaders:s}=r;let c="";if(e.includes("hubdrive")){const r=(yield a.get(e,{headers:s,signal:t})).data;c=d.load(r)(".btn.btn-primary.btn-user.btn-success1.m-1").attr("href")||e}else{const r=decodeString(null==(l=null==(o=null==(n=(yield a.get(e,{headers:s,signal:t})).data.split("s('o','"))?void 0:n[1])?void 0:o.split("',180"))?void 0:l[0]);e=atob(null==r?void 0:r.o);const i=yield getRedirectLinks(e,t,s),u=(yield a.get(i,{headers:s,signal:t})).data;if(c=d.load(u)('h3:contains("1080p")').find("a").attr("href")||u.match(/href="(https:\/\/hubcloud\.[^\/]+\/drive\/[^"]+)"/)[1],c.includes("hubdrive")){const e=(yield a.get(c,{headers:s,signal:t})).data;c=d.load(e)(".btn.btn-primary.btn-user").attr("href")||c}}let u=c;try{u=(null==(i=(yield a.get(c,{headers:s,signal:t})).data.match(/<META HTTP-EQUIV="refresh" content="0; url=([^"]+)">/i))?void 0:i[1])||c}catch(e){}try{return yield hubcloudExtractor(u,t,a,d,s)}catch(e){return[]}})}__name(hubcloudExtractor,"hubcloudExtractor"),__name(getStream,"getStream");var encode=__name(function(e){return btoa(e.toString())},"encode"),decode=__name(function(e){return void 0===e?"":atob(e.toString())},"decode"),pen=__name(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode((e<="Z"?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26)})},"pen"),abortableTimeout=__name((e,{signal:t}={})=>new Promise((r,n)=>{if(t&&t.aborted)return n(new Error("Aborted"));const o=setTimeout(r,e);t&&t.addEventListener("abort",()=>{clearTimeout(o),n(new Error("Aborted"))})}),"abortableTimeout");function getRedirectLinks(e,t,r){return __async(this,null,function*(){try{const i=yield fetch(e,{signal:t}),a=yield i.text();for(var n,o=/ck\('_wp_http_\d+','([^']+)'/g,l="";null!==(n=o.exec(a));)l+=n[1];const d=decode(pen(decode(decode(l)))),s=JSON.parse(d),c=encode(null==s?void 0:s.data),u=(null==s?void 0:s.wp_http1)+"?re="+c;let h=abortableTimeout(1e3*(Number(null==s?void 0:s.total_time)+3),{signal:t});yield h;let p="Invalid Request";for(;p.includes("Invalid Request");){const e=yield fetch(u,{headers:r,signal:t}),n=yield e.text();if(!n.includes("Invalid Request")){p=n.match(/var reurl = "([^"]+)"/)||"";break}}return u||e}catch(t){return e}})}function rot13(e){return e.replace(/[a-zA-Z]/g,function(e){const t=e.charCodeAt(0),r=e<="Z"?65:97;return String.fromCharCode((t-r+13)%26+r)})}function decodeString(e){try{let t=atob(e);return t=atob(t),t=rot13(t),t=atob(t),JSON.parse(t)}catch(e){return null}}__name(getRedirectLinks,"getRedirectLinks"),__name(rot13,"rot13"),__name(decodeString,"decodeString"),exports.decodeString=decodeString,exports.getRedirectLinks=getRedirectLinks,exports.getStream=getStream;