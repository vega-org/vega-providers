"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(e,t)=>__defProp(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var l in t)__defProp(e,l,{get:t[l],enumerable:!0})},__copyProps=(e,t,l,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of __getOwnPropNames(t))__hasOwnProp.call(e,o)||o===l||__defProp(e,o,{get:()=>t[o],enumerable:!(n=__getOwnPropDesc(t,o))||n.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__async=(e,t,l)=>new Promise((n,o)=>{var a=e=>{try{i(l.next(e))}catch(e){o(e)}},r=e=>{try{i(l.throw(e))}catch(e){o(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,r);i((l=l.apply(e,t)).next())}),stream_exports={};__export(stream_exports,{getStream:()=>getStream});var hubcloudDecode=__name(function(e){return void 0===e?"":atob(e.toString())},"hubcloudDecode");function hubcloudExtractor(e,t,l,n,o){return __async(this,null,function*(){var a,r,i,s,c,d;try{o.Cookie="ext_name=ojplmecpdpgccookcobabopnaifgidhf; xla=s4t; cf_clearance=woQrFGXtLfmEMBEiGUsVHrUBMT8s3cmguIzmMjmvpkg-1770053679-1.2.1.1-xBrQdciOJsweUF6F2T_OtH6jmyanN_TduQ0yslc_XqjU6RcHSxI7.YOKv6ry7oYo64868HYoULnVyww536H2eVI3R2e4wKzsky6abjPdfQPxqpUaXjxfJ02o6jl3_Vkwr4uiaU7Wy596Vdst3y78HXvVmKdIohhtPvp.vZ9_L7wvWdce0GRixjh_6JiqWmWMws46hwEt3hboaS1e1e4EoWCvj5b0M_jVwvSxBOAW5emFzvT3QrnRh4nyYmKDERnY";const u=e.split("/").slice(0,3).join("/"),p=[],h=(yield l(`${e}`,{headers:o,signal:t})).data,f=n.load(h),v=h.match(/var\s+url\s*=\s*'([^']+)';/)||[];let m=hubcloudDecode(null==(r=null==(a=v[1])?void 0:a.split("r="))?void 0:r[1])||v[1]||f(".fa-file-download.fa-lg").parent().attr("href")||e;(null==m?void 0:m.startsWith("/"))&&(m=`${u}${m}`);const y=yield fetch(m,{headers:o,signal:t,redirect:"follow"}),g=n.load(yield y.text()),_=g(".btn-success.btn-lg.h6,.btn-danger,.btn-secondary");for(const e of _){let l=g(e).attr("href")||"";switch(!0){case null==l?void 0:l.includes("pixeld"):if(!(null==l?void 0:l.includes("api"))){const e=l.split("/").pop(),t=l.split("/").slice(0,-2).join("/");l=`${t}/api/file/${e}?download`}p.push({server:"Pixeldrain",link:l,type:"mkv"});break;case(null==l?void 0:l.includes(".dev"))&&!(null==l?void 0:l.includes("/?id=")):p.push({server:"Cf Worker",link:l,type:"mkv"});break;case(null==l?void 0:l.includes("hubcloud"))||(null==l?void 0:l.includes("/?id=")):try{const e=yield fetch(l,{method:"HEAD",headers:o,signal:t,redirect:"manual"});let n=l;if(n=e.status>=300&&e.status<400?e.headers.get("location")||l:e.url&&e.url!==l?e.url:e.headers.get("location")||l,n.includes("googleusercontent"))n=n.split("?link=")[1];else{const e=yield fetch(n,{method:"HEAD",headers:o,signal:t,redirect:"manual"});n=e.status>=300&&e.status<400?(null==(i=e.headers.get("location"))?void 0:i.split("?link=")[1])||n:e.url&&e.url!==n?e.url.split("?link=")[1]||e.url:(null==(s=e.headers.get("location"))?void 0:s.split("?link=")[1])||n}p.push({server:"hubcloud",link:n,type:"mkv"})}catch(e){}break;case null==l?void 0:l.includes("cloudflarestorage"):p.push({server:"CfStorage",link:l,type:"mkv"});break;case(null==l?void 0:l.includes("fastdl"))||(null==l?void 0:l.includes("fsl.")):p.push({server:"FastDl",link:l,type:"mkv"});break;case l.includes("hubcdn")&&!l.includes("/?id="):p.push({server:"HubCdn",link:l,type:"mkv"});break;default:if((null==l?void 0:l.includes(".mkv"))||(null==l?void 0:l.includes("?token="))){const e=(null==(d=null==(c=l.match(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i))?void 0:c[1])?void 0:d.replace(/\./g," "))||"Unknown";p.push({server:e,link:l,type:"mkv"})}}}return p}catch(e){return[]}})}function gdflixExtractor(e,t,l,n,o){return __async(this,null,function*(){var a,r,i,s,c,d,u;try{const p=[],h=(yield l(`${e}`,{headers:o,signal:t})).data;let f=n.load(h);if(null==(a=f("body").attr("onload"))?void 0:a.includes("location.replace")){const e=null==(s=null==(i=null==(r=f("body").attr("onload"))?void 0:r.split("location.replace('"))?void 0:i[1].split("'"))?void 0:s[0];if(e){const a=yield l.get(e,{headers:o,signal:t});f=n.load(a.data)}}try{const t=e.split("/").slice(0,3).join("/"),a=f(".btn-secondary").attr("href")||"";if(a.includes("indexbot")){const e=yield l.get(a,{headers:o}),t=e.data.match(/formData\.append\('token', '([a-f0-9]+)'\)/)[1],n=new FormData;n.append("token",t);const r=e.data.match(/fetch\('\/download\?id=([a-zA-Z0-9\/+]+)'/)[1],i=a.split("/download")[0],s=yield fetch(i+"/download?id="+r,{method:"POST",body:n,headers:{Referer:a,Cookie:"PHPSESSID=7e9658ce7c805dab5bbcea9046f7f308"}}),c=yield s.json();p.push({server:"ResumeBot",link:c.url,type:"mkv"})}else{const e=t+a,r=(yield l.get(e,{headers:o})).data,i=n.load(r)(".btn-success").attr("href");i&&p.push({server:"ResumeCloud",link:i,type:"mkv"})}}catch(e){}try{const e=f(".btn-danger").attr("href")||"";if(e.includes("?url=")){const t=e.split("=")[1],l=new FormData;l.append("keys",t);const n=e.split("/").slice(0,3).join("/")+"/api",o=yield fetch(n,{method:"POST",body:l,headers:{"x-token":n}}),a=yield o.json();if(!1===a.error){const e=a.url;p.push({server:"Gdrive-Instant",link:e,type:"mkv"})}}else{const n=(null==(u=null==(d=null==(c=(yield l.head(e,{headers:o,signal:t})).request)?void 0:c.responseURL)?void 0:d.split("?url="))?void 0:u[1])||e;p.push({server:"G-Drive",link:n,type:"mkv"})}}catch(e){}return p}catch(e){return[]}})}__name(hubcloudExtractor,"hubcloudExtractor"),__name(gdflixExtractor,"gdflixExtractor");var getStream=__name(e=>__async(null,[e],function*({link:e,signal:t,providerContext:l}){var n;const{axios:o,cheerio:a,commonHeaders:r}=l;try{let l=e;if(e.includes("linkstore")){const l=yield fetch(e,{signal:t,headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-language":"en-US,en;q=0.9,en-IN;q=0.8","cache-control":"no-cache",pragma:"no-cache",priority:"u=0, i","sec-ch-ua":'"Microsoft Edge";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1","upgrade-insecure-requests":"1",cookie:"PHPSESSID=9o57cff841dqtv8djtn1rp1712; ext_name=ojplmecpdpgccookcobabopnaifgidhf"}}),n=(yield l.text()).match(/<meta\s+http-equiv="refresh"\s+content="[^"]*url=([^"]+)"/i);n&&n[1]&&(e=n[1])}if(e.includes("luxedrive")){const n=yield o.get(e,{signal:t}),r=a.load(n.data),i=r("a.btn.hubcloud").attr("href");if(i)l=i;else{const e=r("a.btn.gdflix").attr("href");e&&(l=e)}}if(l.includes("flix"))return yield gdflixExtractor(l,t,o,a,r);const i=(null==(n=(yield o.get(l,{signal:t})).data.match(/location\.replace\('([^']+)'/))?void 0:n[1])||l;return yield hubcloudExtractor(i.includes("https://hubcloud")?i:l,t,o,a,r)}catch(e){return[]}}),"getStream");exports.getStream=getStream;